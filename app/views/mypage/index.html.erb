<!--マイページ--->
<!---
<h1>Mypage#index</h1>
<p>Find me in app/views/mypage/index.html.erb</p>
-->

<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold mb-6">マイページ</h1>

  <div class="bg-white shadow-md rounded-lg p-6 mb-6">
    <h2 class="text-xl font-semibold mb-4">最近の分析</h2>
    <% if @recent_analyses.any? %>
      <ul class="space-y-4">
        <% @recent_analyses.each do |analysis| %>
          <li class="border-b pb-2">
            <div class="flex justify-between items-center">
              <span class="text-blue-600 hover:text-blue-800"><%= truncate(analysis.url, length: 50) %></span>
              <span class="text-sm text-gray-500"><%= analysis.created_at.strftime("%Y年%m月%d日 %H:%M") %></span>
            </div>
            <p class="text-gray-700 mt-1"><%= truncate(analysis.result, length: 100) %></p>
          </li>
        <% end %>
      </ul>
      <%= link_to '全ての履歴を見る', mypage_history_path, class: 'mt-4 inline-block text-blue-600 hover:text-blue-800' %>
    <% else %>
      <p>まだ分析履歴がありません。</p>
    <% end %>
    <%= link_to 'メンバーページTOPに戻る', members_path, data: { turbo: false } %>
  </div>
</div>